{% extends "base.html" %}

{% block title %}openEar - äº¤äº’å¼å¬åŠ›è®­ç»ƒ{% endblock %}

{% block extra_css %}
<style>
/* ä¸»é¡µæ ·å¼ - è±†ç“£é£æ ¼æç®€è®¾è®¡ */
.homepage {
    background: var(--bg);
    min-height: calc(100vh - 56px);
    padding: 20px 20px 40px;
}

.homepage-container {
    max-width: 1200px;
    margin: 0 auto;
}

/* ç»ƒä¹ å¡ç‰‡ç½‘æ ¼ */
.exercise-cards {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 16px;
    margin-bottom: 60px;
}

.exercise-card {
    background: var(--bg-secondary);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 20px;
    text-decoration: none;
    color: var(--text-primary);
    transition: all 0.2s ease;
    display: flex;
    flex-direction: column;
    position: relative;
    overflow: hidden;
}

.exercise-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: var(--primary);
    transform: scaleX(0);
    transition: transform 0.2s ease;
}

.exercise-card:hover {
    border-color: var(--primary);
    box-shadow: var(--shadow-md);
    transform: translateY(-2px);
}

.exercise-card:hover::before {
    transform: scaleX(1);
}

.exercise-card-header {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 12px;
}

.exercise-card-icon {
    font-size: 24px;
    line-height: 1;
    flex-shrink: 0;
}

.exercise-card-title {
    font-size: 18px;
    font-weight: 500;
    color: var(--text-primary);
    line-height: 1.4;
}

.exercise-card-description {
    font-size: 14px;
    color: var(--text-secondary);
    line-height: 1.6;
    margin-bottom: 12px;
    flex: 1;
}

.exercise-card-category {
    display: inline-block;
    font-size: 12px;
    color: var(--primary);
    padding: 4px 10px;
    background: var(--primary-light);
    border-radius: 12px;
    margin-bottom: 12px;
}

/* ç»Ÿè®¡ä¿¡æ¯åŒºåŸŸ */
.exercise-card-stats {
    display: flex;
    align-items: center;
    gap: 16px;
    font-size: 12px;
    color: var(--text-tertiary);
    padding-top: 12px;
    border-top: 1px solid var(--border);
    flex-wrap: wrap;
    margin-top: auto;
}

.exercise-card-stat {
    display: flex;
    align-items: center;
    gap: 4px;
}

.exercise-card-stat-icon {
    font-size: 14px;
    filter: grayscale(100%);
    opacity: 0.7;
}

/* ç»Ÿè®¡ä¿¡æ¯åŒºåŸŸ */
.exercise-card-stats {
    display: flex;
    align-items: center;
    gap: 16px;
    font-size: 12px;
    color: var(--text-tertiary);
    padding-top: 12px;
    border-top: 1px solid var(--border);
    flex-wrap: wrap;
    margin-top: auto;
}

.exercise-card-stat {
    display: flex;
    align-items: center;
    gap: 4px;
}

.exercise-card-stat-icon {
    font-size: 14px;
    filter: grayscale(100%);
    opacity: 0.7;
}

/* å¼€å‘ä¸­çŠ¶æ€ */
.exercise-card.developing {
    opacity: 0.8;
    cursor: not-allowed;
}

.exercise-card.developing:hover {
    transform: none;
    border-color: var(--border);
}

.exercise-card.developing::before {
    background: #ef4444;
    transform: scaleX(1);
}

.exercise-card-status {
    position: absolute;
    top: 12px;
    right: 12px;
    padding: 4px 8px;
    background: #ef4444;
    color: white;
    font-size: 11px;
    font-weight: 500;
    border-radius: 4px;
    z-index: 1;
}

/* ä»‹ç»åŒºåŸŸ */
.intro-section {
    background: var(--bg-secondary);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 32px;
    margin-bottom: 40px;
}

.intro-section-title {
    font-size: 20px;
    font-weight: 500;
    color: var(--text-primary);
    margin-bottom: 20px;
    padding-bottom: 12px;
    border-bottom: 1px solid var(--border);
}

.intro-text {
    font-size: 14px;
    color: var(--text-secondary);
    line-height: 1.8;
    margin-bottom: 16px;
}

.intro-text strong {
    color: var(--text-primary);
    font-weight: 500;
}

.intro-features {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
    gap: 20px;
    margin-top: 24px;
}

.intro-feature {
    padding: 16px;
    background: var(--bg);
    border-radius: var(--radius-sm);
    border: 1px solid var(--border-light);
}

.intro-feature-title {
    font-size: 15px;
    font-weight: 500;
    color: var(--text-primary);
    margin-bottom: 8px;
}

.intro-feature-desc {
    font-size: 13px;
    color: var(--text-secondary);
    line-height: 1.6;
}

/* å“åº”å¼è®¾è®¡ */
@media (max-width: 768px) {
    .homepage {
        padding: 16px 16px 32px;
    }
    
    .exercise-cards {
        grid-template-columns: 1fr;
        gap: 12px;
        margin-bottom: 40px;
    }
    
    .exercise-card {
        padding: 16px;
    }
    
    .exercise-card-header {
        gap: 10px;
        margin-bottom: 10px;
    }
    
    .exercise-card-icon {
        font-size: 20px;
    }
    
    .exercise-card-title {
        font-size: 16px;
    }
    
    .intro-section {
        padding: 24px 20px;
    }
    
    .intro-features {
        grid-template-columns: 1fr;
        gap: 16px;
    }
}
</style>
{% endblock %}

{% block content %}
<div class="homepage">
    <div class="homepage-container">
        <!-- ç»ƒä¹ å¡ç‰‡ -->
        <div class="exercise-cards">
            {% for type_key, exercise in exercise_types.items() %}
            <a href="{{ url_for('practice', exercise_type=type_key) if exercise.get('status') != 'developing' else '#' }}" 
               class="exercise-card {{ 'developing' if exercise.get('status') == 'developing' else '' }}">
                {% if exercise.get('status') == 'developing' %}
                <div class="exercise-card-status">å¼€å‘ä¸­...</div>
                {% endif %}
                <div class="exercise-card-header">
                    <div class="exercise-card-icon">
                        {{ exercise.icon }}
                    </div>
                    <div class="exercise-card-title">{{ exercise.name }}</div>
                </div>
                <div class="exercise-card-description">{{ exercise.description }}</div>
                <div class="exercise-card-category">{{ exercise.category }}</div>
                {% set stats = exercise_stats.get(type_key, {'duration_minutes': 0, 'accuracy': 0, 'practice_count': 0, 'level': 'E'}) %}
                <div class="exercise-card-stats">
                    <div class="exercise-card-stat">
                        <span class="exercise-card-stat-icon">ğŸ•</span>
                        <span>{{ stats.duration_minutes }} min</span>
                    </div>
                    <div class="exercise-card-stat">
                        <span class="exercise-card-stat-icon">ğŸ†</span>
                        <span>{{ "%.0f"|format(stats.accuracy) }}%</span>
                    </div>
                    <div class="exercise-card-stat">
                        <span class="exercise-card-stat-icon">ğŸ“Š</span>
                        <span>{{ stats.practice_count }} æ¬¡</span>
                    </div>
                    <div class="exercise-card-stat">
                        <span class="exercise-card-stat-icon">â­</span>
                        <span>{{ stats.level }}</span>
                    </div>
                </div>
            </a>
            {% endfor %}
        </div>
        
        <!-- ä»‹ç»åŒºåŸŸ -->
        <div class="intro-section">
            <h2 class="intro-section-title">å¦‚ä½•ä½¿ç”¨</h2>
            <div class="intro-text">
                openEar æ˜¯ä¸€ä¸ªäº¤äº’å¼éŸ³ä¹å¬åŠ›è®­ç»ƒå¹³å°ï¼Œå¸®åŠ©ä½ æå‡éŸ³ä¹æŠ€èƒ½ã€‚ä»¥ä¸‹æ˜¯å¦‚ä½•æ›´å¥½åœ°ä½¿ç”¨è¿™ä¸ªå¹³å°ï¼š
            </div>
            <div class="intro-text">
                <strong>å¼€å§‹ç»ƒä¹ ï¼š</strong>ç‚¹å‡»ä¸Šæ–¹çš„ç»ƒä¹ å¡ç‰‡è¿›å…¥å¯¹åº”çš„è®­ç»ƒæ¨¡å¼ã€‚æ¯ä¸ªç»ƒä¹ ç±»å‹éƒ½ä¸“æ³¨äºä¸åŒçš„éŸ³ä¹æŠ€èƒ½ï¼Œå»ºè®®ä»éŸ³ç¨‹è¯†åˆ«å¼€å§‹ï¼Œè¿™æ˜¯å¬åŠ›è®­ç»ƒçš„åŸºç¡€ã€‚
            </div>
            <div class="intro-text">
                <strong>ä½¿ç”¨çŸ¥è¯†åº“ç¬”è®°ï¼ˆAIæ™ºèƒ½æ•´ç†ï¼‰ï¼š</strong>åœ¨ç»ƒä¹ é¡µé¢çš„"è¯´æ˜"æ ‡ç­¾ä¸­ï¼Œä½ å¯ä»¥æŸ¥çœ‹ç”±AIä»è§†é¢‘è½¬å½•ä¸­æ™ºèƒ½æå–å’Œæ•´ç†çš„ç¬”è®°å†…å®¹ã€‚è¿™äº›ç¬”è®°ä¸ä»…åŒ…å«æ¯ä¸ªéŸ³ç¨‹/éŸ³é˜¶çš„è¯¦ç»†ç‰¹ç‚¹ï¼Œè¿˜è‡ªåŠ¨æå–äº†å‚è€ƒæ­Œæ›²ã€å…·ä½“åº”ç”¨ä¾‹å­ï¼ˆç”šè‡³åŒ…æ‹¬åœ¨æ­Œæ›²ä¸­çš„å…·ä½“ä½ç½®ï¼Œå¦‚"å¼€å¤´"ã€"å‰¯æ­Œ"ç­‰ï¼‰ï¼Œè®©å­¦ä¹ æ›´åŠ ç”ŸåŠ¨å’Œå®ç”¨ã€‚
            </div>
            <div class="intro-text">
                <strong>å‚è€ƒæ­Œæ›²ï¼š</strong>åœ¨"æ­Œå•"æ ‡ç­¾ä¸­ï¼Œä½ å¯ä»¥æ‰¾åˆ°ä¸å½“å‰ç»ƒä¹ ç›¸å…³çš„å‚è€ƒæ­Œæ›²ã€‚è¿™äº›æ­Œæ›²å¯ä»¥å¸®åŠ©ä½ å»ºç«‹éŸ³ç¨‹/éŸ³é˜¶çš„å¬è§‰è®°å¿†ã€‚
            </div>
            <div class="intro-text">
                <strong>æ¸è¿›å¼å­¦ä¹ ï¼š</strong>å»ºè®®æŒ‰ç…§éš¾åº¦é¡ºåºè¿›è¡Œç»ƒä¹ ï¼šå…ˆæŒæ¡åŸºç¡€éŸ³ç¨‹ï¼ˆå°äºŒåº¦ã€å¤§äºŒåº¦ç­‰ï¼‰ï¼Œå†å­¦ä¹ éŸ³é˜¶ï¼Œæœ€åæŒ‘æˆ˜å’Œå¼¦å’Œæ—‹å¾‹ã€‚
            </div>
            
            <div class="intro-features">
                <div class="intro-feature">
                    <div class="intro-feature-title">ğŸµ éŸ³ç¨‹è®­ç»ƒ</div>
                    <div class="intro-feature-desc">è¯†åˆ«ä¸¤ä¸ªéŸ³ç¬¦ä¹‹é—´çš„éŸ³ç¨‹å…³ç³»ï¼Œä»åŒåº¦åˆ°å…«åº¦ï¼Œé€æ­¥å»ºç«‹éŸ³é«˜æ„ŸçŸ¥èƒ½åŠ›ã€‚</div>
                </div>
                <div class="intro-feature">
                    <div class="intro-feature-title">ğŸ¹ éŸ³é˜¶ç»ƒä¹ </div>
                    <div class="intro-feature-desc">æŒæ¡éŸ³é˜¶ä¸­çš„å„ä¸ªéŸ³çº§ï¼Œç†è§£éŸ³é˜¶ç»“æ„ï¼Œæå‡éŸ³é˜¶è¯†åˆ«èƒ½åŠ›ã€‚</div>
                </div>
                <div class="intro-feature">
                    <div class="intro-feature-title">ğŸ¼ å’Œå¼¦è¯†åˆ«</div>
                    <div class="intro-feature-desc">å­¦ä¹ è¯†åˆ«ä¸åŒç±»å‹çš„å’Œå¼¦ï¼Œç†è§£å’Œå¼¦çš„æ„æˆå’Œæ€§è´¨ã€‚</div>
                </div>
                <div class="intro-feature">
                    <div class="intro-feature-title">ğŸ”„ å’Œå¼¦è½¬ä½</div>
                    <div class="intro-feature-desc">è¯†åˆ«å’Œå¼¦çš„è½¬ä½å½¢å¼ï¼Œç†è§£ä½éŸ³å¯¹å’Œå¼¦è‰²å½©çš„å½±å“ã€‚ï¼ˆå¼€å‘ä¸­ï¼‰</div>
                </div>
                <div class="intro-feature">
                    <div class="intro-feature-title">ğŸ¶ å’Œå¼¦è¿›è¡Œ</div>
                    <div class="intro-feature-desc">è¯†åˆ«å’Œå¼¦è¿›è¡Œçš„æ¨¡å¼ï¼Œç†è§£åŠŸèƒ½å’Œå£°çš„è¿›è¡Œé€»è¾‘ã€‚ï¼ˆå¼€å‘ä¸­ï¼‰</div>
                </div>
                <div class="intro-feature">
                    <div class="intro-feature-title">ğŸ’¿ æ—‹å¾‹è®­ç»ƒ</div>
                    <div class="intro-feature-desc">é€šè¿‡æ—‹å¾‹ç‰‡æ®µç»ƒä¹ ï¼Œæå‡æ•´ä½“éŸ³ä¹æ„ŸçŸ¥å’Œè®°å¿†èƒ½åŠ›ã€‚ï¼ˆå¼€å‘ä¸­ï¼‰</div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
